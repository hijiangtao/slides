<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>D3 Basic Tutorial</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="../css/reveal.css">
		<link rel="stylesheet" href="../css/theme/solarized.css" id="theme">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="../lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? '../css/print/pdf.css' : '../css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="../lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section data-markdown>
					<script type="text/template">
						# D3 Basic Tutorial

						Introduction, installation and simple examples.

						<small>[@hijiangtao](https://hijiangtao.github.io/) 2016.10</small>
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
						## MENU

						- D3 Introduction and demo
						- Installing, IDE, etc
						- Coding: visualize your first chart
						- More
					</script>
				</section>

				<!-- D3 Introduction -->
				<section>
					<section data-markdown>
						<script type="text/template">
							## D3 Introduction and demo
						</script>
					</section>
					<section data-markdown>
						<script type="text/template">
							### D3 Introduction

							- D3 (or D3.js) is a JavaScript library for visualizing data using web standards. 
							- D3 helps you bring data to life using SVG, Canvas and HTML. 
							- D3 combines powerful visualization and interaction techniques with a data-driven approach to DOM manipulation, giving you the full capabilities of modern browsers and the freedom to design the right visual interface for your data.
						</script>
					</section>
					<section data-markdown>
						<script type="text/template">
							### [d3js.org](https://d3js.org/)
							![](./assets/d3js.org.png)
						</script>
					</section>
					<section data-markdown>
						<script type="text/template">
							### Online Gallery

							- Charts: [Population Pyramid](http://bl.ocks.org/mbostock/4062085)
							- Tree, Chord, and Sankey: [Sankey Diagrams](https://bost.ocks.org/mike/sankey/)
							- Networks: [Collapsible Force Layout](http://mbostock.github.io/d3/talk/20111116/force-collapsible.html)
							- Maps: [Tokyo Wind Map](http://air.nullschool.net/)
							- Trending: [World Bank Global Development Sprint](http://d3.artzub.com/wbca/)
						</script>
					</section>
					
					<section data-markdown>
						<script type="text/template">
							### HTML, SVG and Canvas

							- **HTML**: Hyper Text Markup Language, is a markup language for describing web documents (web pages)
							- **SVG**: Scalable Vector Graphics. SVG defines vector-based graphics in XML format
							- **Canvas**: The `<canvas>` element is only a container for graphics. You must use a JavaScript to actually draw the graphics. Canvas has several methods for drawing paths, boxes, circles, text, and adding images
						</script>
					</section>

				</section>

				<!-- installation and IDE recommends -->
				<section>
					<section data-markdown>
						<script type="text/template">
							## Installing, IDE, etc
						</script>
					</section>
					<section style="text-align: left;">
						<h3>Installing</h3>
						<pre><code class="html" data-trim contenteditable>
// Use a script tag to include library
// d3 4.0 standard version 
<script src="https://d3js.org/d3.v4.js"></script>
// d3 4.0 minified version
<script src="https://d3js.org/d3.v4.min.js"></script>
// d3 3.x version
<script src="//d3js.org/d3.v3.js"></script>

// Import D3 into an application
npm install d3 // installing command
import * as d3 from "d3"; // use in application

// include standalone D3 microlibraries
<script src="https://d3js.org/d3-selection.v1.js"></script>
// or
import {scaleLinear} from "d3-scale";
						</code></pre>
					</section>
					<section style="text-align: left;" data-markdown>
						<script type="text/template">
							### Installing

							- API: [Arrays](https://github.com/d3/d3/blob/master/API.md#arrays-d3-array) ([Statistics](https://github.com/d3/d3/blob/master/API.md#statistics), [Search](https://github.com/d3/d3/blob/master/API.md#search), [Transformations](https://github.com/d3/d3/blob/master/API.md#transformations), [Histograms](https://github.com/d3/d3/blob/master/API.md#histograms)), [Axes](https://github.com/d3/d3/blob/master/API.md#axes-d3-axis), [Brushes](https://github.com/d3/d3/blob/master/API.md#brushes-d3-brush), [Chords](https://github.com/d3/d3/blob/master/API.md#chords-d3-chord), [Collections](https://github.com/d3/d3/blob/master/API.md#collections-d3-collection) ([Objects](https://github.com/d3/d3/blob/master/API.md#objects), [Maps](https://github.com/d3/d3/blob/master/API.md#maps)...
							- After include the library into your workspace, you can use namespace **d3** to visualize your data, such as:
							```
							d3.select("body").append("p").text("New paragraph!");
							``` 
						</script>
					</section>
					<section style="text-align: left;" data-markdown>
						<script type="text/template">
							### IDE

							- Microsoft Notepad
							- [**Sublime Text**](https://www.sublimetext.com/): A sophisticated text editor for code, markup and prose
							- [**Webstorm**](https://www.jetbrains.com/webstorm/): The smartest JavaScript IDE
							- [IntelliJ IDEA](https://www.jetbrains.com/idea/?fromMenu): Capable and Ergonomic Java * IDE
							- [Eclipse](https://eclipse.org/): Eclipse IDE for JavaScript Web Developers
							- [Atom](https://atom.io/): A hackable text editor
							- [Notepad++](https://notepad-plus-plus.org/): A free source code editor
						</script>
					</section>
					<section style="text-align: left;" data-markdown>
						<script type="text/template">
							### Server Configuration

							- [Apache](https://httpd.apache.org/): WAMP, LAMP, MAMP and XAMPP
							- [Node.js](https://nodejs.org/en/): A JavaScript runtime built on Chrome's V8 JavaScript engine
							- [J2EE](http://www.oracle.com/technetwork/java/javaee/overview/index.html): A platform-independent, Java-centric environment
							- [Python](https://docs.python.org/2/library/simplehttpserver.html): SimpleHTTPServer, Simple HTTP request handler in python 2
							- Others
						</script>
					</section>
				</section>
				
				<section>
					<section>
						<h2>4 steps to visualize your first chart</h2>
						<p>Construct a simple bar chart from TSV file</p>
					</section>
					<section style="text-align: left;" data-markdown>
						<script type="text/template">
							### 0. Data

							![](./assets/tsv-data-img.png)
						</script>
					</section>
					<section style="text-align: left;" >
						<h3>1. A HTML Template</h3>
						<pre><code class="html hljs xml" data-trim contenteditable>
&lt;html&gt;
&lt;head&gt;
	&lt;meta charset=&quot;utf-8&quot;&gt;
	&lt;title&gt;D3 Tutorial&lt;/title&gt;
	&lt;script src=&quot;https://d3js.org/d3.v4.min.js&quot;&gt;&lt;/script&gt;

	&lt;style&gt;
	.bar {
	  fill: steelblue;
	}
	.bar:hover {
	  fill: brown;
	}
	.axis--x path {
	  display: none;
	}
	&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;div id=&quot;barchart&quot;&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
						</code></pre>
					</section>
					<section style="text-align: left;" >
						<h3>2. Initial svg and scale</h3>
						<pre><code class="hljs" data-trim contenteditable>
// append a svg element and define margins
var svg = d3.select("#barchart")
	.append("svg")
	.attr("width", 960)
	.attr("height", 500),
    margin = {top: 20, right: 20, bottom: 30, left: 40},
    width = +svg.attr("width") - margin.left - margin.right,
    height = +svg.attr("height") - margin.top - margin.bottom;

// Constructs a new band scale (x) and a new continuous scale (y)
var x = d3.scaleBand().rangeRound([0, width]).padding(0.1),
    y = d3.scaleLinear().rangeRound([height, 0]);

// append g element
var transStr = "translate(" + margin.left + "," + margin.top + ")";
var g = svg.append("g")
    .attr("transform", transStr);
						</code></pre>
					</section>
					<section style="text-align: left;" >
						<h3>3. Load and format data</h3>
						<pre><code class="hljs" data-trim contenteditable>
// d3 tsv Function
// Creates a request for the TSV file at the specified url 
// with the default mime type text/tab-separated-values
d3.tsv(url, row, callback);

d3.tsv("d3-tutorial-tsv-data.tsv", function(d) {
  d.frequency = +d.frequency;
  return d;
}, barchartCallback);
						</code></pre>
						
						<small>
							<p>Requests (d3-request)</p>
							<li><a href="https://github.com/d3/d3-request/blob/master/README.md#csv">d3.csv</a> - get a comma-separated values (CSV) file.</li>
							<li><a href="https://github.com/d3/d3-request/blob/master/README.md#html">d3.html</a> - get an HTML file.</li>
							<li><a href="https://github.com/d3/d3-request/blob/master/README.md#json">d3.json</a> - get a JSON file.</li>
							<li><a href="https://github.com/d3/d3-request/blob/master/README.md#text">d3.text</a> - get a plain text file.</li>
							<li><a href="https://github.com/d3/d3-request/blob/master/README.md#tsv">d3.tsv</a> - get a tab-separated values (TSV) file.</li>
							<li><a href="https://github.com/d3/d3-request/blob/master/README.md#xml">d3.xml</a> - get an XML file.</li>
						</small>
					</section>
					<section style="text-align: left;" >
						<h3>4. Bind data and update element</h3>
						<pre><code class="hljs" data-trim contenteditable>
function barchartCallback(error, data) {
  if (error) throw error;

  // Given a value from the domain
  // returns the corresponding value from the range.
  x.domain(data.map(function(d) { 
  	return d.letter; 
  }));
  y.domain([0, d3.max(data, function(d) { 
  	return d.frequency; 
  })]);

  // x axis
  g.append("g")
      .attr("class", "axis axis--x")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.axisBottom(x));
  
  // y axis
  g.append("g")
      .attr("class", "axis axis--y")
      .call(d3.axisLeft(y).ticks(10, "%"))
    .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", "0.71em")
      .attr("text-anchor", "end")
      .text("Frequency");

  // bind data and define rect element generating rule
  g.selectAll(".bar")
    .data(data)
    .enter().append("rect")
      .attr("class", "bar")
      .attr("x", function(d) { return x(d.letter); })
      .attr("y", function(d) { return y(d.frequency); })
      .attr("width", x.bandwidth())
      .attr("height", function(d) { 
      	return height - y(d.frequency); 
      });
}
						</code></pre>
					</section>
					<section style="text-align: left;" >
						<h3>5. <a target="_blank" href="https://github.com/ISCAS-VIS/infovis-ucas/blob/master/views/TA/d3-tutorial-bar-chart.html">Complete Codes</a></h3>
						<pre><code class="hljs" data-trim contenteditable>
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset=&quot;utf-8&quot;&gt;
  &lt;title&gt;D3 Tutorial&lt;/title&gt;
  &lt;script src=&quot;https://d3js.org/d3.v4.min.js&quot;&gt;&lt;/script&gt;

  &lt;style&gt;
  .bar {
    fill: steelblue;
  }
  .bar:hover {
    fill: brown;
  }
  .axis--x path {
    display: none;
  }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id=&quot;barchart&quot;&gt;&lt;/div&gt;

  &lt;script&gt;
    // append a svg element and define margins
    var svg = d3.select(&quot;#barchart&quot;)
      .append(&quot;svg&quot;)
      .attr(&quot;width&quot;, 960)
      .attr(&quot;height&quot;, 500),
        margin = {top: 20, right: 20, bottom: 30, left: 40},
        width = +svg.attr(&quot;width&quot;) - margin.left - margin.right,
        height = +svg.attr(&quot;height&quot;) - margin.top - margin.bottom;

    // Constructs a new band scale (x) and a new continuous scale (y)
    var x = d3.scaleBand().rangeRound([0, width]).padding(0.1),
        y = d3.scaleLinear().rangeRound([height, 0]);

    // append g element
    var transStr = &quot;translate(&quot; + margin.left + &quot;,&quot; + margin.top + &quot;)&quot;;
    var g = svg.append(&quot;g&quot;)
        .attr(&quot;transform&quot;, transStr);

    d3.tsv(&quot;./data/d3-tutorial-tsv-data.tsv&quot;, function(d) {
      d.frequency = +d.frequency;
      return d;
    }, barchartCallback);

    function barchartCallback(error, data) {
      if (error) throw error;

      // Given a value from the domain
      // returns the corresponding value from the range.
      x.domain(data.map(function(d) { 
        return d.letter; 
      }));
      y.domain([0, d3.max(data, function(d) { 
        return d.frequency; 
      })]);

      // x axis
      g.append(&quot;g&quot;)
          .attr(&quot;class&quot;, &quot;axis axis--x&quot;)
          .attr(&quot;transform&quot;, &quot;translate(0,&quot; + height + &quot;)&quot;)
          .call(d3.axisBottom(x));
      
      // y axis
      g.append(&quot;g&quot;)
          .attr(&quot;class&quot;, &quot;axis axis--y&quot;)
          .call(d3.axisLeft(y).ticks(10, &quot;%&quot;))
        .append(&quot;text&quot;)
          .attr(&quot;transform&quot;, &quot;rotate(-90)&quot;)
          .attr(&quot;y&quot;, 6)
          .attr(&quot;dy&quot;, &quot;0.71em&quot;)
          .attr(&quot;text-anchor&quot;, &quot;end&quot;)
          .text(&quot;Frequency&quot;);

      // bind data and define rect element generating rule
      g.selectAll(&quot;.bar&quot;)
        .data(data)
        .enter().append(&quot;rect&quot;)
          .attr(&quot;class&quot;, &quot;bar&quot;)
          .attr(&quot;x&quot;, function(d) { return x(d.letter); })
          .attr(&quot;y&quot;, function(d) { return y(d.frequency); })
          .attr(&quot;width&quot;, x.bandwidth())
          .attr(&quot;height&quot;, function(d) { 
            return height - y(d.frequency); 
          });
    }
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
						</code></pre>
					</section>
					<section style="text-align: left;" data-markdown>
						<script type="text/template">
							### 6. [Result](https://iscas-vis.github.io/infovis-ucas/views/TA/d3-tutorial-bar-chart.html)

							![https://iscas-vis.github.io/infovis-ucas/views/TA/](./assets/bar-chart-result.png)
						</script>
					</section>
				</section>

				<section style="text-align: left;">
					<section>
						<h2>More</h2>
						<p>Be careful about the API's differences between 4.0 and 3.x</p>
						<p class="fragment">Be careful about async loading in JavaScript</p>
						<p class="fragment">Make good use of Google, Stack Overflow, etc.</p>
					</section>
					<section style="text-align: left;" data-markdown>
						<script type="text/template">
							## More

							- [D3 WIKI](https://github.com/d3/d3/wiki)
							- [D3 API Reference](https://github.com/d3/d3/blob/master/API.md)
							- [D3 Gallery](https://github.com/d3/d3/wiki/Gallery)
							- [Mike's Blog](http://bost.ocks.org/mike/)
							- [Tutorials](https://github.com/d3/d3/wiki/Tutorials)
							- [Getting Started with D3](https://book.douban.com/subject/10877588/), Mike Dewar, O'Reilly Media, June 2012
							- [精通D3.js：交互式数据可视化高级编程](https://book.douban.com/subject/26599680/), 吕之华
							- [数据可视化](https://book.douban.com/subject/25760272/), 陈为，沈则潜，陶煜波 等著
							- [JavaScript高级程序设计（第3版）](https://book.douban.com/subject/10546125/) / English Version [Professional JavaScript for Web Developers 3rd Edition](https://book.douban.com/subject/7157249/)
						</script>
					</section>
				</section>

				<section style="text-align: left;">
					<h1>THE END</h1>
					<p>@hijiangtao</p>
					<p>
						- <a href="https://d3js.org/" target="_blank">d3js.org</a> <br>
						- <a href="http://vis.ios.ac.cn/UCAS_16_Fall/" target="_blank">VIS Course (2016 Fall) Wiki</a><br>
						- <a href="https://hijiangtao.github.io/" target="_blank">Joe's Blog</a>
					</p>
				</section>

			</div>

		</div>

		<script src="../lib/js/head.min.js"></script>
		<script src="../js/reveal.js"></script>

		<script>

			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: '../lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: '../plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '../plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '../plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: '../plugin/zoom-js/zoom.js', async: true },
					{ src: '../plugin/notes/notes.js', async: true }
				]
			});

		</script>
		
		<script>
		  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

		  ga('create', 'UA-48887175-1', 'auto');
		  ga('send', 'pageview');

		</script>
	</body>
</html>
